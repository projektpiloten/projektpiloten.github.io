<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
<head>
<style type="text/css">
body {
    margin: 0px; 
    padding: 0px; 
    background-color: #fff;
    font-family: sans-serif;
}
.pagediv {
    margin: 0px;
    padding: 0px;
}
.page {
    width: 98%;
    margin: 1% 0% 0% 1%;
    background-color: #fff;
}
.content {
    margin-left: 0%;
    margin-right: 0%;
    background-color: #eee;
}
.statusline {
    position: fixed; 
    bottom: 0px; 
    left: 0px; 
    width: 100%; 
    background-color: #000; 
    color: #fff; 
    text-align: center;
    font-size: 16pt;
    font-weight: bold;
    visibility: hidden;
}
.statusline-text {
    padding: 1em; 
    min-height: 1.2em;
}
.posbar {
    width: 100%;
    height: .75em;
    background-color: #222;
    padding: 0px;
    margin: 0px;
}
.posbar-inner {
    position:absolute; 
    left:0px; 
    width:0px; 
    height:.75em; 
    background-color:#444; 
    display:inline-block;
}
.posbar-tick {
    position:absolute;
    left:0px; 
    width:2px; 
    height:.75em; 
    background-color:#888; 
    display:inline-block;
}
</style>
<noscript>
<style type="text/css">
.statusline {
    visibility: visible;
}
</style>
</noscript>
<title>Aktion Freudige Erregung Voller Hoffnung, Kapitel 19, Iteration IV</title>
<script>
    var cumulativeOffset = function(element) {
        var top = 0, left = 0;
        do {
            top += element.offsetTop  || 0;
            left += element.offsetLeft || 0;
            element = element.offsetParent;
        } while(element);

        return {
            top: top,
            left: left
        };
    };
    
    var statuslines= [];
        
    function scrollstuff2() {
        if(!statuslines.length) 
            return;
        var rc= document.getElementById("body").getBoundingClientRect();
        var docHeight= rc.bottom - rc.top;
        var pages= document.getElementsByClassName("page");
        var textIdx= (document.body.scrollTop * statuslines.length / docHeight);
        var pageIdx= (document.body.scrollTop * pages.length / docHeight);
        document.getElementById("statusline").innerHTML= statuslines[parseInt(textIdx)];
        document.getElementById("posbar2").style.left= parseInt(textIdx) * 100 / statuslines.length + "%";
        document.getElementById("posbar1").style.left= parseInt(pageIdx) * 100 / pages.length + "%";
        document.getElementById("posbar1a").style.left= (Math.sin((pageIdx-parseInt(pageIdx))*Math.PI/2)) * 100 + "%";
        document.getElementById("posbar2a").style.left= (Math.sin((textIdx-parseInt(textIdx))*Math.PI/2)) * 100 + "%";
    }
    
    function loadprep2() {
        statuslines= document.getElementById("statusline").innerHTML.replace(/\n\n/g, "...").split("\n");
        var pages= document.getElementsByClassName("page");
        document.getElementById("posbar1").style.width= "" + Math.round(100/pages.length) + "%";
        scrollstuff2();
        document.getElementById("posbar2").style.width= "" + Math.round(100/statuslines.length) + "%";
        document.getElementById("statusline-container").style.visibility= "visible";
    }

    function loadprep() {
        var pages= document.getElementsByClassName("page");
        for(var i= 0; i<pages.length; i++) 
            pages[i].style.visibility= "hidden";
        document.getElementById("pageoverlay-div").style.visibility= "visible";
    }

    function scrollstuff() {
        pages= document.getElementsByClassName("page");
        var i;
        for(i= 0; i<pages.length; i++) {
            var abspos= cumulativeOffset(pages[i]);
            var rc= pages[i].getBoundingClientRect();
            scrollDestination= abspos.top;
            if(document.body.scrollTop <= abspos.top + (rc.bottom - rc.top)/2)
                break;
        }
        document.getElementById("pageoverlay").src= pages[i].src;
        /*
        //~ window.scroll(0, 100);
        //~ console.log(document.body.scrollTop);
        var pages= document.getElementsByClassName("page");
        var rc= pages[0].getBoundingClientRect();
        var yd= 10; //(rc.bottom - rc.top)/2;
        
        if(document.body.scrollTop - lastScrollPos > yd) {
            ++lastScrolledPage;
            lastScrollPos= cumulativeOffset(pages[lastScrolledPage]).top;
            window.scroll(0, lastScrollPos);
        } else if(document.body.scrollTop - lastScrollPos < -yd) {
            --lastScrolledPage;
            lastScrollPos= cumulativeOffset(pages[lastScrolledPage]).top;
            window.scroll(0, lastScrollPos);
        }
        */
        
        /*
        pages= document.getElementsByClassName("page");
        var scrollDestination= 0;
        for(var i= 0; i<pages.length; i++) {
            var abspos= cumulativeOffset(pages[i]);
            var rc= pages[i].getBoundingClientRect();
            scrollDestination= abspos.top;
            if(document.body.scrollTop <= abspos.top + (rc.bottom - rc.top)/2)
                break;
        }
        if(Math.abs(document.body.scrollTop - scrollDestination) > 10)
            window.scroll(0, scrollDestination);
        */
    };
</script>
</head>
<body id="body" onscroll="scrollstuff2()" onload="loadprep2()">  <!-- onscroll="scrollstuff()" onload="loadprep()"> -->
<div class="content">
<noscript>
<div style="background-color: #fbb; padding: 2em; margin: 2em; text-align: center"><h1>Bitte JavaScript aktivieren.</h2></div>
</noscript>
    <div class="pagediv"><img class="page" id="page01" src="page01.svg"></div>
    <div class="pagediv"><img class="page" id="page02" src="page02.svg"></div>
    <div class="pagediv"><img class="page" id="page03" src="page03.svg"></div>
    <div class="pagediv"><img class="page" id="page04" src="page04.svg"></div>
    <div class="pagediv"><img class="page" id="page05" src="page05.svg"></div>
    <div class="pagediv"><img class="page" id="page06" src="page06.svg"></div>
    <div class="pagediv"><img class="page" id="page07" src="page07.svg"></div>
    <div class="pagediv"><img class="page" id="page08" src="page08.svg"></div>
    <div class="pagediv"><img class="page" id="page09" src="page09.svg"></div>
    <div class="pagediv"><img class="page" id="page10" src="page10.svg"></div>
    <div class="pagediv"><img class="page" id="page11" src="page11.svg"></div>
    <div class="pagediv"><img class="page" id="page12" src="page12.svg"></div>
    <div class="pagediv"><img class="page" id="page13" src="page13.svg"></div>
    <div class="pagediv" style="font-size: 14pt; height: 4em;"></div>
</div>
<div id="pageoverlay-div" style="visibility:hidden; position:fixed; top:0px; left:0px; width: 100%; margin-left:0px; margin-right:0px;">
    <img id="pageoverlay" src="page02.svg" style="width:90%; margin-left:5%; margin-right:5%;">
</div>
<div class="statusline" id="statusline-container">
    <div class="posbar">
        <span id="posbar1" class="posbar-inner">
            <span id="posbar1a" class="posbar-tick"></span>
        </span>
    </div>
    <div class="statusline-text" id="statusline">
        SEELAX misst von Kopf bis Schwanz etwa 12 Meter&#xa;&#xa;
        &#xa;&#xa;und wird im Abstand von ca. 15 Metern zum Ufer im Seeboden verankert.
        Der &uuml;berdachte Fahrradgenerator steht am Ufer auf einer Holzplatte von ca. 2,5 Metern L&auml;nge.
        Der Interaktive Elektrische Tribulator kann von Besuchern jeden Alters verwendet werden&#xa;&#xa;
        &#xa;&#xa;um durch Muskelkraft bis zu 150W Strom zu erzeugen.
        Nur bei Betrieb des Generators werden die Elektronik sowie die 700 einzeln ansteuerbaren RGB-LEDs&#xa;&#xa;
        &#xa;&#xa;mit Energie versorgt und in Gang gesetzt.
        Die Lichtfarbe und -Rhythmik der Schlange wird von verschiedenen am Fahrrad angebrachten Sensoren bestimmt.
        Von Zeit zu Zeit st&ouml;&szlig;t die Schlange mittels einer Pumpe Seewasser aus ihren leuchtenden N&uuml;stern.
    </div>
    <div class="posbar">
        <span id="posbar2" class="posbar-inner">
            <span id="posbar2a" class="posbar-tick"></span>
        </span>
    </div>
</div>
</body>
</html>